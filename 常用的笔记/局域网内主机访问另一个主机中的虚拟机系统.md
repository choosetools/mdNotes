**首先，需要把两台主机的防火墙都关闭了**

如果开启着Windows防火墙，那么两台主机之间无法进行通信，必须先把防火墙关了。



**其次，需要让两台主机都处于同一网络下，只有处于同一个局域网下才能实现互通，如果是不同网络，需要使用到VPN。**

处于同一个局域网的主机才可以互相ping通，否则需要使用到vpn来访问。



**然后，需要让两台主机以及虚拟机的IP地址网段相同，比如192.168.1.1，就是让前面三个数字相同**

一般来说，在同一个局域网下的两个主机，IP地址是相同的，比如我这里的两个主机一个IP地址为192.168.111.154，一个主机的IP地址为192.168.111.236。现在，我们只需要将虚拟机的IP地址修改成192.168.111.xxx，即网段需要相同。具体的修改步骤如下：

查看虚拟机所在的主机使用的网络的IP地址，使用`ipconfig -all`查看网络信息：

![894a595f7bfe0376cbd4525328a12f0](.\images\894a595f7bfe0376cbd4525328a12f0.png)

记住以下信息：

虚拟机机所在的主机IP地址为192.168.111.236

子网掩码为255.255.255.0

默认网关为192.168.111.1

DNS服务器地址为192.168.111.1



我们需要去虚拟机系统中修改网络信息，首先进入到`/etc/sysconfig/network-scripts/`目录，查看该目录下的文件信息：

![bb756f63c73d7e91655eabea9ea672c](.\images\bb756f63c73d7e91655eabea9ea672c.png)

我们可以看到，网络配置信息在ifcfg-ens33文件中，对该文件进行修改：

```shell
vim ifcfg-ens33
```

进入到文件中，要求：

![9d81bcb4819ea6386a69d2513429f39](.\images\9d81bcb4819ea6386a69d2513429f39.png)

`BOOTPROTO`的值修改为static

`ONBOOT`的值修改为yes

`IPADDR`表示IP地址，值要求与主机IP地址位于同一网段下（192.168.111.1-192.168.111.255中任意一值，这里设置成了5）

`NETMASK`子网掩码，使用与主机一样的值即可

`GATEWAY`网关，使用192.168.111.2

`DNS`使用与主机一样的DNS。

修改完成后，重启网络服务：

```shell
systemctl restart network
```

这就将虚拟机的网络配置修改完成，虚拟机的IP地址就是例中的192.168.111.5。



**最后，要让虚拟机的网络模式处于桥接模式下，处于桥接模式下的虚拟机，可以直接与外部的主机进行通信。**

修改步骤：

<img src=".\images\98742ea177e511f145151dc5687b6f2.png" alt="98742ea177e511f145151dc5687b6f2" style="zoom:67%;" />

<img src=".\images\a38f293ca58900ad67e05d77efcaef1.png" alt="a38f293ca58900ad67e05d77efcaef1" style="zoom:67%;" />

<img src=".\images\a80d5b7abd9183a139db7c2ba06b99f.png" alt="a80d5b7abd9183a139db7c2ba06b99f" style="zoom:67%;" />

将虚拟机修改成桥接模式之后，与外界主机就可以进行通信了：

![image-20240409213821130](.\images\image-20240409213821130.png)

之后，我们就可以使用外界主机的Xshell软件，连接虚拟机了：

![image-20240409213900205](.\images\image-20240409213900205.png)